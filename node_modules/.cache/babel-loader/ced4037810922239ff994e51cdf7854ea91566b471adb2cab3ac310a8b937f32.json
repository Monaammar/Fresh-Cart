{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{useQuery}from\"react-query\";import{MagnifyingGlass}from\"react-loader-spinner\";import{Link}from\"react-router-dom\";import{CartContext}from\"../../Context/CartContext\";import toast from\"react-hot-toast\";import style from'./Products.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Products(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];function getAllProducts(){return _getAllProducts.apply(this,arguments);}function _getAllProducts(){_getAllProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://ecommerce.routemisr.com/api/v1/products\");case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setProducts(data.data);case 5:case\"end\":return _context.stop();}},_callee);}));return _getAllProducts.apply(this,arguments);}useEffect(function(){getAllProducts();});var _useContext=useContext(CartContext),addToCart=_useContext.addToCart,setNumberOfCartItems=_useContext.setNumberOfCartItems;function addProductToCart(_x){return _addProductToCart.apply(this,arguments);}function _addProductToCart(){_addProductToCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var _yield$addToCart,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return addToCart(id);case 2:_yield$addToCart=_context2.sent;data=_yield$addToCart.data;console.log(data);if(data.status===\"success\"){toast.success(data.message);}case 6:case\"end\":return _context2.stop();}},_callee2);}));return _addProductToCart.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"row my-4\",children:[console.log(products),products.length>0?products.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2 mb-5 border \".concat(style.card,\" mx-3\"),children:[/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none\",to:\"/ProductDetails/\".concat(product._id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"inner product p-3 rounded text-black \",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageCover,className:\"w-100\",alt:product.title}),/*#__PURE__*/_jsx(\"h4\",{className:\"h6 my-2\",children:product.category.name}),/*#__PURE__*/_jsx(\"h3\",{className:\"h6 fw-bold\",children:product.title.split(\" \",2).join(\" \")}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between p-2\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"col-6 \",children:[product.price,\" EGP\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 px-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star\"}),product.ratingsAverage]})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success w-100 mb-3\",onClick:function onClick(){addProductToCart(product._id);},children:\"ADD TO CART\"})]},product._id);}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex w-100 justify-content-center\",children:/*#__PURE__*/_jsx(MagnifyingGlass,{visible:true,height:\"80\",width:\"80\",ariaLabel:\"MagnifyingGlass-loading\",wrapperStyle:{},wrapperClass:\"MagnifyingGlass-wrapper\",glassColor:\"#c0cfff\",color:\"#e15b64\"})})]});}export default Products;","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","useQuery","MagnifyingGlass","Link","CartContext","toast","style","jsx","_jsx","jsxs","_jsxs","Products","_useState","_useState2","_slicedToArray","products","setProducts","getAllProducts","_getAllProducts","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","sent","stop","_useContext","addToCart","setNumberOfCartItems","addProductToCart","_x","_addProductToCart","_callee2","id","_yield$addToCart","_callee2$","_context2","console","log","status","success","message","className","children","length","map","product","concat","card","to","_id","src","imageCover","alt","title","category","name","split","join","price","ratingsAverage","onClick","visible","height","width","ariaLabel","wrapperStyle","wrapperClass","glassColor","color"],"sources":["C:/Users/user/app/src/Pages/Products/Products.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useQuery } from \"react-query\";\r\nimport { MagnifyingGlass } from \"react-loader-spinner\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CartContext } from \"../../Context/CartContext\";\r\nimport toast from \"react-hot-toast\";\r\nimport style from './Products.module.css'\r\nfunction Products() {\r\n  const [products, setProducts] = useState([]);\r\n  async function getAllProducts() {\r\n    let { data } = await axios.get(\r\n      \"https://ecommerce.routemisr.com/api/v1/products\"\r\n    );\r\n    setProducts(data.data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAllProducts();\r\n  });\r\n  const { addToCart, setNumberOfCartItems } = useContext(CartContext);\r\n  async function addProductToCart(id) {\r\n    let { data } = await addToCart(id);\r\n    console.log(data);\r\n    if (data.status === \"success\") {\r\n      toast.success(data.message);\r\n      \r\n    }\r\n  }\r\n  return (\r\n    <div className=\"row my-4\">\r\n      {console.log(products)}\r\n\r\n      {products.length > 0 ? (\r\n        products.map((product) => (\r\n          <div className={`col-md-2 mb-5 border ${style.card} mx-3`}key={product._id}>\r\n            <Link\r\n              className=\"text-decoration-none\"\r\n              to={`/ProductDetails/${product._id}`}\r\n            >\r\n              <div className=\"inner product p-3 rounded text-black \">\r\n                <img\r\n                  src={product.imageCover}\r\n                  className=\"w-100\"\r\n                  alt={product.title}\r\n                ></img>\r\n                <h4 className=\"h6 my-2\">{product.category.name}</h4>\r\n                <h3 className=\"h6 fw-bold\">\r\n                  {product.title.split(\" \", 2).join(\" \")}\r\n                </h3>\r\n                <div className=\"d-flex justify-content-between p-2\">\r\n                  <small className=\"col-6 \">{product.price} EGP</small>\r\n                  <div className=\"col-6 px-1\">\r\n                    <i className=\"fa-solid fa-star\"></i>\r\n                    {product.ratingsAverage}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Link>\r\n            <button\r\n              className=\"btn btn-success w-100 mb-3\"\r\n              onClick={() => {\r\n                addProductToCart(product._id);\r\n              }}\r\n            >\r\n              ADD TO CART\r\n            </button>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <div className=\"d-flex w-100 justify-content-center\">\r\n          <MagnifyingGlass\r\n            visible={true}\r\n            height=\"80\"\r\n            width=\"80\"\r\n            ariaLabel=\"MagnifyingGlass-loading\"\r\n            wrapperStyle={{}}\r\n            wrapperClass=\"MagnifyingGlass-wrapper\"\r\n            glassColor=\"#c0cfff\"\r\n            color=\"#e15b64\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}