{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{useQuery}from\"react-query\";import{MagnifyingGlass}from\"react-loader-spinner\";import{Link}from\"react-router-dom\";import{CartContext}from\"../../Context/CartContext\";import toast from\"react-hot-toast\";import{ListContext}from\"../../Context/WishListContext\";import style from\"./FeaturedProduct.module.css\";import icon from\"../../assets/images/heart.256x228.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeaturedProduct(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];function getAllProducts(){return _getAllProducts.apply(this,arguments);}function _getAllProducts(){_getAllProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://ecommerce.routemisr.com/api/v1/products\");case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setProducts(data.data);case 5:case\"end\":return _context.stop();}},_callee);}));return _getAllProducts.apply(this,arguments);}useEffect(function(){getAllProducts();});var _useContext=useContext(CartContext),addToCart=_useContext.addToCart,setNumberOfCartItems=_useContext.setNumberOfCartItems;var _useContext2=useContext(ListContext),addToList=_useContext2.addToList;function addProductToCart(_x){return _addProductToCart.apply(this,arguments);}function _addProductToCart(){_addProductToCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var _yield$addToCart,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return addToCart(id);case 2:_yield$addToCart=_context2.sent;data=_yield$addToCart.data;console.log(data);if(data.status===\"success\"){toast.success(data.message);// setNumberOfCartItems(data.numOfCartItems);\n}case 6:case\"end\":return _context2.stop();}},_callee2);}));return _addProductToCart.apply(this,arguments);}function addProductToList(_x2){return _addProductToList.apply(this,arguments);}// function getData() {\n//   return axios.get(\"https://ecommerce.routemisr.com/api/v1/products\");\n// }\n// let { isLoading, isError, data } = useQuery(\"featuredProduct\", getData);\nfunction _addProductToList(){_addProductToList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var _yield$addToList,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return addToList(id);case 2:_yield$addToList=_context3.sent;data=_yield$addToList.data;console.log(data);if(data.status===\"success\"){toast.success(data.message);}case 6:case\"end\":return _context3.stop();}},_callee3);}));return _addProductToList.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[console.log(products),products.length>0?products.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2 \".concat(style.card,\" border mb-5   mx-3\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 \".concat(style.button),onClick:function onClick(){addProductToList(product._id);},children:/*#__PURE__*/_jsx(\"img\",{src:icon,className:\"px-5 mx-5 my-1 py-2 \"})}),/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none\",to:\"/ProductDetails/\".concat(product._id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"inner product p-3 rounded text-black\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageCover,className:\"w-100\",alt:product.title}),/*#__PURE__*/_jsx(\"h4\",{className:\"h6 my-2 text-success\",children:product.category.name}),/*#__PURE__*/_jsx(\"h3\",{className:\"h6 fw-bold\",children:product.title.split(\" \",2).join(\" \")}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between px-2\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"col-8 \",children:[product.price,\" EGP\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 px-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star\"}),product.ratingsAverage]})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success w-100 mb-3\",onClick:function onClick(){addProductToCart(product._id);},children:\"ADD TO CART\"})]},product._id);}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex w-100 justify-content-center\",children:/*#__PURE__*/_jsx(MagnifyingGlass,{visible:true,height:\"80\",width:\"80\",ariaLabel:\"MagnifyingGlass-loading\",wrapperStyle:{},wrapperClass:\"MagnifyingGlass-wrapper\",glassColor:\"#c0cfff\",color:\"#e15b64\"})})]});}export default FeaturedProduct;","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","useQuery","MagnifyingGlass","Link","CartContext","toast","ListContext","style","icon","jsx","_jsx","jsxs","_jsxs","FeaturedProduct","_useState","_useState2","_slicedToArray","products","setProducts","getAllProducts","_getAllProducts","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","sent","stop","_useContext","addToCart","setNumberOfCartItems","_useContext2","addToList","addProductToCart","_x","_addProductToCart","_callee2","id","_yield$addToCart","_callee2$","_context2","console","log","status","success","message","addProductToList","_x2","_addProductToList","_callee3","_yield$addToList","_callee3$","_context3","className","children","length","map","product","concat","card","button","onClick","_id","src","to","imageCover","alt","title","category","name","split","join","price","ratingsAverage","visible","height","width","ariaLabel","wrapperStyle","wrapperClass","glassColor","color"],"sources":["C:/Users/user/app/src/Components/FeaturedProduct/FeaturedProduct.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useQuery } from \"react-query\";\r\nimport { MagnifyingGlass } from \"react-loader-spinner\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CartContext } from \"../../Context/CartContext\";\r\nimport toast from \"react-hot-toast\";\r\nimport { ListContext } from \"../../Context/WishListContext\";\r\nimport style from \"./FeaturedProduct.module.css\";\r\nimport icon from \"../../assets/images/heart.256x228.png\";\r\nfunction FeaturedProduct() {\r\n  const [products, setProducts] = useState([]);\r\n  async function getAllProducts() {\r\n    let { data } = await axios.get(\r\n      \"https://ecommerce.routemisr.com/api/v1/products\"\r\n    );\r\n    setProducts(data.data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAllProducts();\r\n  });\r\n\r\n  const { addToCart, setNumberOfCartItems } = useContext(CartContext);\r\n  const { addToList } = useContext(ListContext);\r\n\r\n  async function addProductToCart(id) {\r\n    const { data } = await addToCart(id);\r\n    console.log(data);\r\n    if (data.status === \"success\") {\r\n      toast.success(data.message);\r\n      // setNumberOfCartItems(data.numOfCartItems);\r\n    }\r\n  }\r\n  async function addProductToList(id) {\r\n    let { data } = await addToList(id);\r\n    console.log(data);\r\n    if (data.status === \"success\") {\r\n      toast.success(data.message);\r\n    }\r\n  }\r\n  // function getData() {\r\n  //   return axios.get(\"https://ecommerce.routemisr.com/api/v1/products\");\r\n  // }\r\n  // let { isLoading, isError, data } = useQuery(\"featuredProduct\", getData);\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      {console.log(products)}\r\n\r\n      {products.length > 0 ? (\r\n        products.map((product) => (\r\n          <div\r\n            className={`col-md-2 ${style.card} border mb-5   mx-3`}\r\n            key={product._id}\r\n          >\r\n              <span\r\n              className={`px-3 ${style.button}`}\r\n              onClick={() => {\r\n                addProductToList(product._id);\r\n              }}\r\n            >\r\n              <img src={icon} className=\"px-5 mx-5 my-1 py-2 \" />\r\n            </span>\r\n            <Link\r\n              className=\"text-decoration-none\"\r\n              to={`/ProductDetails/${product._id}`}\r\n            >\r\n              <div className=\"inner product p-3 rounded text-black\">\r\n                <img\r\n                  src={product.imageCover}\r\n                  className=\"w-100\"\r\n                  alt={product.title}\r\n                ></img>\r\n                <h4 className=\"h6 my-2 text-success\">\r\n                  {product.category.name}\r\n                </h4>\r\n\r\n                <h3 className=\"h6 fw-bold\">\r\n                  {product.title.split(\" \", 2).join(\" \")}\r\n                  {/* <span\r\n                    className={`px-3 ${style.button}`}\r\n                    onClick={() => {\r\n                      addProductToList(product._id);\r\n                    }}\r\n                  >\r\n                    <img src={icon} className=\"px-5 mx-5 \" />\r\n                  </span> */}\r\n                </h3>\r\n\r\n                <div className=\"d-flex justify-content-between px-2\">\r\n                  <small className=\"col-8 \">{product.price} EGP</small>\r\n                  <div className=\"col-6 px-1\">\r\n                    <i className=\"fa-solid fa-star\"></i>\r\n                    {product.ratingsAverage}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Link>\r\n            {/* <span\r\n              className={`px-3 ${style.button}`}\r\n              onClick={() => {\r\n                addProductToList(product._id);\r\n              }}\r\n            >\r\n              <img src={icon} className=\"px-5 mx-5 py-2 \" />\r\n            </span> */}\r\n            <button\r\n              className=\"btn btn-success w-100 mb-3\"\r\n              onClick={() => {\r\n                addProductToCart(product._id);\r\n              }}\r\n            >\r\n              ADD TO CART\r\n            </button>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <div className=\"d-flex w-100 justify-content-center\">\r\n          <MagnifyingGlass\r\n            visible={true}\r\n            height=\"80\"\r\n            width=\"80\"\r\n            ariaLabel=\"MagnifyingGlass-loading\"\r\n            wrapperStyle={{}}\r\n            wrapperClass=\"MagnifyingGlass-wrapper\"\r\n            glassColor=\"#c0cfff\"\r\n            color=\"#e15b64\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FeaturedProduct;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}