{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useFormik}from\"formik\";import{FallingLines}from\"react-loader-spinner\";import{useNavigate}from\"react-router-dom\";import*as Yup from\"yup\";import{userContext}from'./../../Context/UserContext';import{useContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LogIn(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),isError=_useState2[0],setIsError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var navigate=useNavigate();var _useContext=useContext(userContext),setUserToken=_useContext.setUserToken;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var _yield$axios$post$cat,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);console.log(values);_context.next=4;return axios.post(\"https://ecommerce.routemisr.com/api/v1/auth/signin\",values).catch(function(error){setIsLoading(false);setIsError(error.response.data.message);});case 4:_yield$axios$post$cat=_context.sent;data=_yield$axios$post$cat.data;if(data.message===\"success\"){setIsLoading(false);setUserToken(data.token);localStorage.setItem(\"userToken\",data.token);navigate(\"/Home\");}console.log(data);case 8:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}var formik=useFormik({initialValues:{email:\"\",password:\"\"},validationSchema:Yup.object({email:Yup.string().required().email(),password:Yup.string().required().matches(/[A-Z][a-z0-9]{3,9}/,\"Password is Invalid \")}),onSubmit:handleSubmit});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-75 mx-auto mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-success fw-bold\",children:\"LogIn Now\"}),isError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:isError}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",className:\"form-control\",value:formik.values.email,onChange:formik.handleChange,onBlur:formik.handleBlur}),formik.touched.email&&formik.errors.email?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:formik.errors.email}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",className:\"form-control\",value:formik.values.password,onChange:formik.handleChange,onBlur:formik.handleBlur}),formik.touched.password&&formik.errors.password?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:formik.errors.password}):null]}),isLoading?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:/*#__PURE__*/_jsx(FallingLines,{color:\"#000\",width:\"25\",visible:true,ariaLabel:\"falling-lines-loading\"})}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\" btn btn-success\",children:\"LogIn\"})]})]})});}export default LogIn;","map":{"version":3,"names":["axios","useFormik","FallingLines","useNavigate","Yup","userContext","useContext","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LogIn","_useState","_useState2","_slicedToArray","isError","setIsError","_useState3","_useState4","isLoading","setIsLoading","navigate","_useContext","setUserToken","handleSubmit","_x","_handleSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","_yield$axios$post$cat","data","wrap","_callee$","_context","prev","next","console","log","post","catch","error","response","message","sent","token","localStorage","setItem","stop","formik","initialValues","email","password","validationSchema","object","string","required","matches","onSubmit","children","className","htmlFor","type","name","id","value","onChange","handleChange","onBlur","handleBlur","touched","errors","color","width","visible","ariaLabel"],"sources":["C:/Users/user/app/src/Pages/LogIn/LogIn.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useFormik } from \"formik\";\r\nimport { FallingLines } from \"react-loader-spinner\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport * as Yup from \"yup\";\r\nimport { userContext } from './../../Context/UserContext';\r\nimport { useContext, useState } from 'react';\r\n\r\n\r\nfunction LogIn() {\r\n  const [isError, setIsError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  let navigate = useNavigate();\r\n  let {setUserToken}=useContext(userContext);\r\n  async function handleSubmit(values) {\r\n    setIsLoading(true);\r\n    console.log(values);\r\n\r\n    let { data } = await axios\r\n      .post(\"https://ecommerce.routemisr.com/api/v1/auth/signin\", values)\r\n      .catch((error) => {\r\n        setIsLoading(false);\r\n        setIsError(error.response.data.message);\r\n      });\r\n\r\n    if (data.message === \"success\") {\r\n      setIsLoading(false);\r\n      setUserToken(data.token);\r\n      localStorage.setItem(\"userToken\", data.token);\r\n      navigate(\"/Home\");\r\n    }\r\n    console.log(data);\r\n  }\r\n\r\n  let formik = useFormik({\r\n    initialValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n    validationSchema: Yup.object({\r\n      email: Yup.string().required().email(),\r\n      password: Yup.string()\r\n        .required()\r\n        .matches(/[A-Z][a-z0-9]{3,9}/, \"Password is Invalid \"),\r\n    }),\r\n    onSubmit: handleSubmit,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div className=\"w-75 mx-auto mt-5\">\r\n        <h2 className=\"text-success fw-bold\">LogIn Now</h2>\r\n        {isError && <div className=\"alert alert-danger\">{isError}</div>}\r\n        <form onSubmit={formik.handleSubmit}>\r\n          <div className=\"form-group my-2\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              id=\"email\"\r\n              className=\"form-control\"\r\n              value={formik.values.email}\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n            />\r\n            {formik.touched.email && formik.errors.email ? (\r\n              <div className=\"alert alert-danger\">{formik.errors.email}</div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"form-group my-2\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              id=\"password\"\r\n              className=\"form-control\"\r\n              value={formik.values.password}\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n            />\r\n            {formik.touched.password && formik.errors.password ? (\r\n              <div className=\"alert alert-danger\">{formik.errors.password}</div>\r\n            ) : null}\r\n          </div>\r\n\r\n          {isLoading ? (\r\n            <button className=\"btn btn-success\">\r\n              <FallingLines\r\n                color=\"#000\"\r\n                width=\"25\"\r\n                visible={true}\r\n                ariaLabel=\"falling-lines-loading\"\r\n              />\r\n            </button>\r\n          ) : (\r\n            <button type=\"submit\" className=\" btn btn-success\">\r\n              LogIn\r\n            </button>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LogIn;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}