{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{CartContext}from\"../../Context/CartContext\";import emptyCart from\"../../assets/images/empty cart.png\";import style from\"./Cart.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(){var _data$data,_data$data2;var _useContext=useContext(CartContext),getLoggedCart=_useContext.getLoggedCart,deleteCartItem=_useContext.deleteCartItem,updateCartQuantity=_useContext.updateCartQuantity,setNumberOfCartItems=_useContext.setNumberOfCartItems;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];function updateCount(_x,_x2){return _updateCount.apply(this,arguments);}function _updateCount(){_updateCount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(count,id){var _yield$updateCartQuan,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return updateCartQuantity(count,id);case 2:_yield$updateCartQuan=_context.sent;data=_yield$updateCartQuan.data;// console.log(data);\nsetData(data);setNumberOfCartItems(data.numOfCartItems);console.log(setNumberOfCartItems);case 7:case\"end\":return _context.stop();}},_callee);}));return _updateCount.apply(this,arguments);}function deleteItem(_x3){return _deleteItem.apply(this,arguments);}function _deleteItem(){_deleteItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var _yield$deleteCartItem,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deleteCartItem(id);case 2:_yield$deleteCartItem=_context2.sent;data=_yield$deleteCartItem.data;// console.log(data);\nsetData(data);setNumberOfCartItems(data.numOfCartItems);case 6:case\"end\":return _context2.stop();}},_callee2);}));return _deleteItem.apply(this,arguments);}function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$getLoggedCart,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getLoggedCart();case 2:_yield$getLoggedCart=_context3.sent;data=_yield$getLoggedCart.data;console.log(data);setData(data);setNumberOfCartItems(data.numOfCartItems);case 7:case\"end\":return _context3.stop();}},_callee3);}));return _getData.apply(this,arguments);}useEffect(function(){getData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 \",children:[console.log(data),/*#__PURE__*/_jsx(\"h2\",{className:\"text-success\",children:\"Shop Cart\"}),(data===null||data===void 0?void 0:data.numOfCartItems)>0?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"text-success\",children:[\"Total Cart Price : \",data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.totalCartPrice,\" EGP\"]}),data===null||data===void 0?void 0:(_data$data2=data.data)===null||_data$data2===void 0?void 0:_data$data2.products.map(function(product){var _product$product;return/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center gy-2 border-bottom py-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"img\",{src:product.product.imageCover,className:\"w-100 mb-2\",alt:product.product.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-10 mb-2\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-success\",children:product===null||product===void 0?void 0:(_product$product=product.product)===null||_product$product===void 0?void 0:_product$product.title}),/*#__PURE__*/_jsxs(\"p\",{children:[product.price,\" EGP\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash mx-2 text-danger\",onClick:function onClick(){deleteItem(product.product.id);}}),\"Remove\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-2 d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-sm text-success\",onClick:function onClick(){updateCount(product.count+1,product.product.id);},children:\"+\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mx-2 mb-0 \",children:product.count}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-sm text-success\",onClick:function onClick(){updateCount(product.count-1,product.product.id);},children:\"-\"})]})]},product.product._id);}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success my-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/CheckOut\",className:\" link-unstyled text-black \".concat(style.test),children:\"CheckOut\"})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center flex-column align-items-center\",children:/*#__PURE__*/_jsx(\"img\",{src:emptyCart,className:\"w-50\"})})]});};export default Cart;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","CartContext","emptyCart","style","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","_data$data","_data$data2","_useContext","getLoggedCart","deleteCartItem","updateCartQuantity","setNumberOfCartItems","_useState","_useState2","_slicedToArray","data","setData","updateCount","_x","_x2","_updateCount","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","count","id","_yield$updateCartQuan","wrap","_callee$","_context","prev","next","sent","numOfCartItems","console","log","stop","deleteItem","_x3","_deleteItem","_callee2","_yield$deleteCartItem","_callee2$","_context2","getData","_getData","_callee3","_yield$getLoggedCart","_callee3$","_context3","className","children","totalCartPrice","products","map","product","_product$product","src","imageCover","alt","title","price","onClick","_id","to","concat","test"],"sources":["C:/Users/user/app/src/Pages/Cart/Cart.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { CartContext } from \"../../Context/CartContext\";\r\nimport emptyCart from \"../../assets/images/empty cart.png\";\r\nimport style from \"./Cart.module.css\";\r\nconst Cart = () => {\r\n  const {\r\n    getLoggedCart,\r\n    deleteCartItem,\r\n    updateCartQuantity,\r\n    setNumberOfCartItems,\r\n  } = useContext(CartContext);\r\n  const [data, setData] = useState({});\r\n\r\n  async function updateCount(count, id) {\r\n    const { data } = await updateCartQuantity(count, id);\r\n    // console.log(data);\r\n    setData(data);\r\n    setNumberOfCartItems(data.numOfCartItems);\r\n    console.log(setNumberOfCartItems);\r\n  }\r\n  async function deleteItem(id) {\r\n    const { data } = await deleteCartItem(id);\r\n    // console.log(data);\r\n    setData(data);\r\n    setNumberOfCartItems(data.numOfCartItems);\r\n  }\r\n\r\n  async function getData() {\r\n    let { data } = await getLoggedCart();\r\n    console.log(data);\r\n    setData(data);\r\n    setNumberOfCartItems(data.numOfCartItems);\r\n  }\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-3 \">\r\n      {console.log(data)}\r\n      <h2 className=\"text-success\">Shop Cart</h2>\r\n      {data?.numOfCartItems > 0 ? (\r\n        <>\r\n          {\" \"}\r\n          <p className=\"text-success\">\r\n            Total Cart Price : {data?.data?.totalCartPrice} EGP\r\n          </p>\r\n          {data?.data?.products.map((product) => (\r\n            <div\r\n              className=\"row align-items-center gy-2 border-bottom py-3\"\r\n              key={product.product._id}\r\n            >\r\n              <div className=\"col-10\">\r\n                <div className=\"row align-items-center\">\r\n                  <div className=\"col-2\">\r\n                    <img\r\n                      src={product.product.imageCover}\r\n                      className=\"w-100 mb-2\"\r\n                      alt={product.product.title}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-10 mb-2\">\r\n                    <h6 className=\"text-success\">{product?.product?.title}</h6>\r\n                    <p>{product.price} EGP</p>\r\n                    <p className=\"cursor-pointer\">\r\n                      <i\r\n                        className=\"fa-solid fa-trash mx-2 text-danger\"\r\n                        onClick={() => {\r\n                          deleteItem(product.product.id);\r\n                        }}\r\n                      ></i>\r\n                      Remove\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-2 d-flex align-items-center\">\r\n                <button\r\n                  className=\"btn-sm text-success\"\r\n                  onClick={() => {\r\n                    updateCount(product.count + 1, product.product.id);\r\n                  }}\r\n                >\r\n                  +\r\n                </button>\r\n                <p className=\"mx-2 mb-0 \">{product.count}</p>\r\n                <button\r\n                  className=\"btn-sm text-success\"\r\n                  onClick={() => {\r\n                    updateCount(product.count - 1, product.product.id);\r\n                  }}\r\n                >\r\n                  -\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <button className=\"btn btn-success my-3\">\r\n            <Link to={\"/CheckOut\"} className={` link-unstyled text-black ${style.test}`}>\r\n              CheckOut\r\n            </Link>\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <div className=\"d-flex justify-content-center flex-column align-items-center\">\r\n          <img src={emptyCart} className=\"w-50\"></img>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default Cart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}